<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HLS Player - RTMP Server Demo</title>
</head>
<body>
  <h2>HLS Player</h2>
  <p>Push to <code>rtmp://YOUR_IP:1935/live/STREAM_KEY</code>, then open <code>http://YOUR_IP:8080/?key=STREAM_KEY</code>.</p>
  <video id="video" controls autoplay playsinline width="720"></video>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    const key = new URLSearchParams(location.search).get("key") || "test";
    const src = `http://localhost:80/hls/${key}.m3u8`;
    const video = document.getElementById("video");
    if (video.canPlayType('application/vnd.apple.mpegurl')) {
      video.src = src;
    } else if (Hls.isSupported()) {
      const hls = new Hls({lowLatencyMode: true});
      hls.loadSource(src);
      hls.attachMedia(video);
    } else {
      document.body.insertAdjacentHTML("beforeend", "<p>Your browser cannot play HLS.</p>");
    }
  </script>
</body>
</html>
